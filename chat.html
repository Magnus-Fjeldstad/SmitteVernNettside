<!DOCTYPE html>
<html lang="no">
	<head>
		<meta charset="utf-8">
		<title></title>

		
	</head>
    <link rel="stylesheet" href="chat.css">
	<body>
		<style type="text/css">
			body {
			 background-color: #615756;
;
			}

			p{
				color: #4DFFF3;
			}
		</style>
		<h1>CoronaChat</h1>

		<form id="skjema">
			<input type="text" id="inpAvsender" required placeholder="Hvem er du?">
			<input type="text" id="inpMening" required placeholder="Hvem sier du?">
			<button type="submit" class="button">OK</button>
		</form>
		<article id="txtMeldinger"></article>

		
		<!-- The core Firebase JS SDK is always required and must be listed first -->
		<script src="https://www.gstatic.com/firebasejs/8.2.6/firebase-app.js"></script>

		<!-- TODO: Add SDKs for Firebase products that you want to use
		     https://firebase.google.com/docs/web/setup#available-libraries -->
		<script src="https://www.gstatic.com/firebasejs/8.2.6/firebase-database.js"></script>
		<script src="https://www.gstatic.com/firebasejs/8.2.6/firebase-analytics.js"></script>

		<script>
            // Your web app's Firebase configuration
            // For Firebase JS SDK v7.20.0 and later, measurementId is optional
            var firebaseConfig = {
                apiKey: "AIzaSyDWmZAPXxoyMhI5a_-o5soMbVlXWpcamQw",
                authDomain: "solsol-8fa64.firebaseapp.com",
                projectId: "solsol-8fa64",
                storageBucket: "solsol-8fa64.appspot.com",
                messagingSenderId: "82425228259",
                appId: "1:82425228259:web:e582964966993de15c0ed6",
                measurementId: "G-HK4ZPVF77V"
            };
            // Initialize Firebase
            firebase.initializeApp(firebaseConfig);
            firebase.analytics();
        </script>


		<script>
			let database = firebase.database();
			let meldinger = database.ref("meldinger");
			let skjema = document.getElementById("skjema");
			let inpAvsender = document.getElementById("inpAvsender");
			let inpMening = document.getElementById("inpMening");
			let txtMeldinger = document.getElementById("txtMeldinger");

			function visMelding(snapshot){
				let melding= snapshot.val();
				let meldingTekst= `<p>
					<b> ${melding.avsender}: </b>
					<i> ${melding.tekst}</i>
					</p>`;
				txtMeldinger.innerHTML= txtMeldinger.innerHTML+ meldingTekst;
			}

			function regNyMelding(evt){
				evt.preventDefault();
				var nyMelding={
					avsender: inpAvsender.value,
					tekst: inpMening.value
				};
				meldinger.push(nyMelding);
				inpMening.value="";
			}

			meldinger.on("child_added",visMelding);
			skjema.onsubmit= regNyMelding;
		</script>
	
	</body>
</html>